import { jsx as m } from "react/jsx-runtime";
import { useRef as d, useState as c, useEffect as f } from "react";
import { logger as E } from "./server-entry-fb5f2b80.js";
const g = ["text/javascript", "application/javascript", "application/ecmascript"], I = (r) => g.includes(r.type);
function y(r) {
  const e = d(null), [i, S] = c(() => []), [u, T] = c(() => []), [o, p] = c(() => !1);
  function l() {
    if (!e.current || !e.current.getElementsByTagName)
      return;
    const a = e.current.getElementsByTagName("script");
    for (let s = 0; s < a.length; s++) {
      const t = a[s];
      if (t.src && !i.includes(t.src)) {
        i.push(t.src);
        const n = document.createElement("script");
        n.async = !0, n.src = t.src, document.head.appendChild(n);
      } else if (I(t) && !u.includes(t.innerText))
        try {
          u.push(t.innerText), new Function(t.innerText)();
        } catch (n) {
          E.warn("[BUILDER.IO] `Embed`: Error running script:", n);
        }
    }
  }
  return f(() => {
    e.current && !o && (p(!0), l());
  }, [e.current, o]), /* @__PURE__ */ m(
    "div",
    {
      className: "builder-embed",
      ref: e,
      dangerouslySetInnerHTML: { __html: r.content }
    }
  );
}
export {
  y as default
};
